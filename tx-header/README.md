### Optimize v3 (rewrite markets and symbol)

Словарь zstd_v7 загружен: 131072 байт

Генерация завершена:
  • Всего транзакций:        53205
  • Всего real tx:        82858
  • Общий размер (байты, несжатый файл):    7442889
  • Средний размер tx:       139.9 байт
  • Средний размер real tx:       89.8 байт
Сгенерировано 53205 транзакций → txs.bin
Алгоритм zstd       → txs.bin.zstd (5235089 байт)
   Коэффициент: 1.42x   Экономия: 29.7%
   Сжатие:     32 мс    Распаковка:    5 мс

Алгоритм zstd-dict  → txs.bin.zstd-dict.dict (5235099 байт)
   Коэффициент: 1.42x   Экономия: 29.7%
   Сжатие:     29 мс    Распаковка:    5 мс

Алгоритм lz4        → txs.bin.lz4 (5407142 байт)
   Коэффициент: 1.38x   Экономия: 27.4%
   Сжатие:     25 мс    Распаковка:   16 мс

Алгоритм s2         → txs.bin.s2 (5650955 байт)
   Коэффициент: 1.32x   Экономия: 24.1%
   Сжатие:      6 мс    Распаковка:    2 мс

Алгоритм gzip       → txs.bin.gzip (5263066 байт)
   Коэффициент: 1.41x   Экономия: 29.3%
   Сжатие:     82 мс    Распаковка:   22 мс

Bybit test:  Всего записано: 257967 (создано всего: 257967). Общий объем: 33.09 MB. Средний размер tx: 134.5 байт (batched)

### Optimize v2 (no paddings, no payload size)

Словарь zstd_v7 загружен: 131072 байт

Генерация завершена:
  • Всего транзакций:        53205
  • Всего real tx:        83276
  • Общий размер (байты, несжатый файл):    7479206
  • Средний размер tx:       140.6 байт
  • Средний размер real tx:       89.8 байт
Сгенерировано 53205 транзакций → txs.bin
Алгоритм zstd       → txs.bin.zstd (5338844 байт)
   Коэффициент: 1.40x   Экономия: 28.6%
   Сжатие:     38 мс    Распаковка:    4 мс

Алгоритм zstd-dict  → txs.bin.zstd-dict.dict (5338889 байт)
   Коэффициент: 1.40x   Экономия: 28.6%
   Сжатие:     33 мс    Распаковка:    7 мс

Алгоритм lz4        → txs.bin.lz4 (5542961 байт)
   Коэффициент: 1.35x   Экономия: 25.9%
   Сжатие:     37 мс    Распаковка:    2 мс

Алгоритм s2         → txs.bin.s2 (5717313 байт)
   Коэффициент: 1.31x   Экономия: 23.6%
   Сжатие:      6 мс    Распаковка:    2 мс

Алгоритм gzip       → txs.bin.gzip (5406149 байт)
   Коэффициент: 1.38x   Экономия: 27.7%
   Сжатие:     83 мс    Распаковка:   26 мс



### New version (enum + native batching)

Генерация завершена:
  • Всего транзакций:        53205
  • Всего real tx:        	 83014
  • Общий размер (байты, несжатый файл):    7580375
  • Средний размер tx:       142.5 байт
  • Средний размер real tx:       91.3 байт
  
Сгенерировано 53205 транзакций → txs.bin
Алгоритм zstd       → txs.bin.zstd (5475332 байт)
   Коэффициент: 1.38x   Экономия: 27.8%
   Сжатие:     36 мс    Распаковка:    4 мс

Алгоритм zstd-dict  → txs.bin.zstd-dict.dict (5475428 байт)
   Коэффициент: 1.38x   Экономия: 27.8%
   Сжатие:     30 мс    Распаковка:    7 мс

Алгоритм lz4        → txs.bin.lz4 (5670110 байт)
   Коэффициент: 1.34x   Экономия: 25.2%
   Сжатие:     27 мс    Распаковка:    2 мс

Алгоритм s2         → txs.bin.s2 (5844544 байт)
   Коэффициент: 1.30x   Экономия: 22.9%
   Сжатие:      6 мс    Распаковка:    2 мс

Алгоритм gzip       → txs.bin.gzip (5480016 байт)
   Коэффициент: 1.38x   Экономия: 27.7%
   Сжатие:     88 мс    Распаковка:   33 мс


### latest proto optimize + order_id 
# i5
## Tx size: 127 byte (trading core)
Словарь zstd_v7 загружен: 131072 байт

Генерация завершена:
  • Всего транзакций:        50605
  • Общий размер (байты, несжатый файл):    6431063
  • Средний размер tx:       127.1 байт
Сгенерировано 50605 транзакций → txs.bin
Алгоритм zstd       → txs.bin.zstd (4742054 байт)
   Коэффициент: 1.36x   Экономия: 26.3%
   Сжатие:     27 мс    Распаковка:    4 мс

Алгоритм zstd-dict  → txs.bin.zstd-dict.dict (4742100 байт)
   Коэффициент: 1.36x   Экономия: 26.3%
   Сжатие:     28 мс    Распаковка:    3 мс

Алгоритм lz4        → txs.bin.lz4 (4898770 байт)
   Коэффициент: 1.31x   Экономия: 23.8%
   Сжатие:     27 мс    Распаковка:    2 мс

Алгоритм s2         → txs.bin.s2 (5069711 байт)
   Коэффициент: 1.27x   Экономия: 21.2%
   Сжатие:      5 мс    Распаковка:    1 мс

Алгоритм gzip       → txs.bin.gzip (4743745 байт)
   Коэффициент: 1.36x   Экономия: 26.2%
   Сжатие:     73 мс    Распаковка:   24 мс


## Intel i5

Словарь zstd загружен: 1048576 байт

Генерация завершена:
  • Всего транзакций:        50005
  • Общий размер (байты, несжатый файл):    6466942
  • Средний размер tx:       129.3 байт
Сгенерировано 50005 транзакций → txs.bin
Алгоритм zstd     → txs.bin.zstd (5151393 байт)
   Коэффициент: 1.26x   Экономия: 20.3%
   Время: 48 мс

Алгоритм zstd-dict → txs.bin.zstd-dict.dict (5152026 байт)
   Коэффициент: 1.26x   Экономия: 20.3%
   Время: 52 мс

Алгоритм lz4      → txs.bin.lz4 (5454514 байт)
   Коэффициент: 1.19x   Экономия: 15.7%
   Время: 26 мс

Алгоритм s2       → txs.bin.s2 (5587697 байт)
   Коэффициент: 1.16x   Экономия: 13.6%
   Время: 6 мс

Алгоритм s2-better → txs.bin.s2-better (5386732 байт)
   Коэффициент: 1.20x   Экономия: 16.7%
   Время: 17 мс

Алгоритм s2-best  → txs.bin.s2-best (5365059 байт)
   Коэффициент: 1.21x   Экономия: 17.0%
   Время: 395 мс

Алгоритм gzip     → txs.bin.gzip (5393441 байт)
   Коэффициент: 1.20x   Экономия: 16.6%
   Время: 36 мс


## Xeon 

Словарь zstd загружен: 1048576 байт

Генерация завершена:
  • Всего транзакций:        52005
  • Общий размер (байты, несжатый файл):    6738978
  • Средний размер tx:       129.6 байт
Сгенерировано 52005 транзакций → txs.bin
Алгоритм zstd     → txs.bin.zstd (5366770 байт)
   Коэффициент: 1.26x   Экономия: 20.4%
   Время: 111 мс

Алгоритм zstd-dict → txs.bin.zstd-dict.dict (5367646 байт)
   Коэффициент: 1.26x   Экономия: 20.3%
   Время: 114 мс

Алгоритм lz4      → txs.bin.lz4 (5683810 байт)
   Коэффициент: 1.19x   Экономия: 15.7%
   Время: 56 мс

Алгоритм s2       → txs.bin.s2 (5820517 байт)
   Коэффициент: 1.16x   Экономия: 13.6%
   Время: 16 мс

Алгоритм s2-better → txs.bin.s2-better (5613508 байт)
   Коэффициент: 1.20x   Экономия: 16.7%
   Время: 36 мс

Алгоритм s2-best  → txs.bin.s2-best (5590283 байт)
   Коэффициент: 1.21x   Экономия: 17.0%
   Время: 835 мс

Алгоритм gzip     → txs.bin.gzip (5621839 байт)
   Коэффициент: 1.20x   Экономия: 16.6%
   Время: 84 мс


## Перетренеровал словарь (больше создания/отмена/изменение ордеров)
## i5 

Словарь zstd_v4 загружен: 131072 байт

Генерация завершена:
  • Всего транзакций:        50605
  • Общий размер (байты, несжатый файл):    6424315
  • Средний размер tx:       127.0 байт
Сгенерировано 50605 транзакций → txs.bin
Алгоритм zstd     → txs.bin.zstd (5133546 байт)
   Коэффициент: 1.25x   Экономия: 20.1%
   Время: 50 мс

Алгоритм zstd-dict → txs.bin.zstd-dict.dict (5134338 байт)
   Коэффициент: 1.25x   Экономия: 20.1%
   Время: 49 мс

Алгоритм lz4      → txs.bin.lz4 (5411791 байт)
   Коэффициент: 1.19x   Экономия: 15.8%
   Время: 25 мс

Алгоритм s2       → txs.bin.s2 (5555851 байт)
   Коэффициент: 1.16x   Экономия: 13.5%
   Время: 6 мс

Алгоритм s2-better → txs.bin.s2-better (5349531 байт)
   Коэффициент: 1.20x   Экономия: 16.7%
   Время: 18 мс

Алгоритм s2-best  → txs.bin.s2-best (5323970 байт)
   Коэффициент: 1.21x   Экономия: 17.1%
   Время: 407 мс

Алгоритм gzip     → txs.bin.gzip (5361966 байт)
   Коэффициент: 1.20x   Экономия: 16.5%
   Время: 36 мс


## Intel Xeon Gold 

Словарь zstd_v4 загружен: 131072 байт

Генерация завершена:
  • Всего транзакций:        50605
  • Общий размер (байты, несжатый файл):    6423447
  • Средний размер tx:       126.9 байт
Сгенерировано 50605 транзакций → txs.bin
Алгоритм zstd     → txs.bin.zstd (5131304 байт)
   Коэффициент: 1.25x   Экономия: 20.1%
   Время: 110 мс

Алгоритм zstd-dict → txs.bin.zstd-dict.dict (5131387 байт)
   Коэффициент: 1.25x   Экономия: 20.1%
   Время: 110 мс

Алгоритм lz4      → txs.bin.lz4 (5411209 байт)
   Коэффициент: 1.19x   Экономия: 15.8%
   Время: 53 мс

Алгоритм s2       → txs.bin.s2 (5555437 байт)
   Коэффициент: 1.16x   Экономия: 13.5%
   Время: 14 мс

Алгоритм s2-better → txs.bin.s2-better (5350273 байт)
   Коэффициент: 1.20x   Экономия: 16.7%
   Время: 34 мс

Алгоритм s2-best  → txs.bin.s2-best (5324322 байт)
   Коэффициент: 1.21x   Экономия: 17.1%
   Время: 783 мс

Алгоритм gzip     → txs.bin.gzip (5362769 байт)
   Коэффициент: 1.20x   Экономия: 16.5%
   Время: 78 мс


## Добавлено время распаковки
# i5
Словарь zstd_v4 загружен: 131072 байт

Генерация завершена:
  • Всего транзакций:        50605
  • Общий размер (байты, несжатый файл):    6423384
  • Средний размер tx:       126.9 байт
Сгенерировано 50605 транзакций → txs.bin
Алгоритм zstd       → txs.bin.zstd (5134717 байт)
   Коэффициент: 1.25x   Экономия: 20.1%
   Сжатие:     55 мс    Распаковка:    3 мс

Алгоритм zstd-dict  → txs.bin.zstd-dict.dict (5135391 байт)
   Коэффициент: 1.25x   Экономия: 20.1%
   Сжатие:     55 мс    Распаковка:    4 мс

Алгоритм lz4        → txs.bin.lz4 (5410849 байт)
   Коэффициент: 1.19x   Экономия: 15.8%
   Сжатие:     24 мс    Распаковка:    6 мс

Алгоритм s2         → txs.bin.s2 (5557582 байт)
   Коэффициент: 1.16x   Экономия: 13.5%
   Сжатие:      6 мс    Распаковка:    2 мс

Алгоритм gzip       → txs.bin.gzip (5142134 байт)
   Коэффициент: 1.25x   Экономия: 19.9%
   Сжатие:     80 мс    Распаковка:   21 мс


##Xeon

Словарь zstd_v4 загружен: 131072 байт

Генерация завершена:
  • Всего транзакций:        50605
  • Общий размер (байты, несжатый файл):    6424378
  • Средний размер tx:       127.0 байт
Сгенерировано 50605 транзакций → txs.bin
Алгоритм zstd       → txs.bin.zstd (5132917 байт)
   Коэффициент: 1.25x   Экономия: 20.1%
   Сжатие:    104 мс    Распаковка:    8 мс

Алгоритм zstd-dict  → txs.bin.zstd-dict.dict (5133464 байт)
   Коэффициент: 1.25x   Экономия: 20.1%
   Сжатие:    101 мс    Распаковка:    8 мс

Алгоритм lz4        → txs.bin.lz4 (5412087 байт)
   Коэффициент: 1.19x   Экономия: 15.8%
   Сжатие:     51 мс    Распаковка:    9 мс

Алгоритм s2         → txs.bin.s2 (5556451 байт)
   Коэффициент: 1.16x   Экономия: 13.5%
   Сжатие:     13 мс    Распаковка:    5 мс

Алгоритм gzip       → txs.bin.gzip (5135037 байт)
   Коэффициент: 1.25x   Экономия: 20.1%
   Сжатие:    167 мс    Распаковка:   55 мс


##########
## Изменения в протобаф (использования uint64 вместо fixed) 

Словарь zstd_v6 загружен: 32768 байт

Генерация завершена:
  • Всего транзакций:        50605
  • Общий размер (байты, несжатый файл):    5754332
  • Средний размер tx:       113.7 байт
Сгенерировано 50605 транзакций → txs.bin
Алгоритм zstd       → txs.bin.zstd (5296829 байт)
   Коэффициент: 1.09x   Экономия: 8.0%
   Сжатие:     29 мс    Распаковка:    3 мс

Алгоритм zstd-dict  → txs.bin.zstd-dict.dict (5296770 байт)
   Коэффициент: 1.09x   Экономия: 8.0%
   Сжатие:     27 мс    Распаковка:    2 мс

Алгоритм lz4        → txs.bin.lz4 (5423366 байт)
   Коэффициент: 1.06x   Экономия: 5.8%
   Сжатие:     25 мс    Распаковка:    2 мс

Алгоритм s2         → txs.bin.s2 (5470268 байт)
   Коэффициент: 1.05x   Экономия: 4.9%
   Сжатие:      5 мс    Распаковка:    1 мс

Алгоритм gzip       → txs.bin.gzip (5108422 байт)
   Коэффициент: 1.13x   Экономия: 11.2%
   Сжатие:     77 мс    Распаковка:   24 мс



### Tx size (old, unactual)

5931315 / 51014 = 117 byte/tx at bybit mm

